<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ôn Tập Kiến Thức</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/fill-in-blank-review.css">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pastelGreen: '#D4E6D4',
                        pastelGreenDark: '#B8D8B8',
                        pastelGreenLight: '#E8F3E8',
                        softYellow: '#F8F4D9',
                        warmBeige: '#F5E6CC',
                        softPink: '#FFE4E1',
                        sage: '#D4E2D4',
                        lightBlue: '#D4E5F2',
                        errorRed: '#FEE2E2',
                        cardGreen: '#8CC084',
                        cardYellow: '#FFD166',
                        cardBlue: '#73A5C6',
                        cardPink: '#F4A7B9',
                        cardAmber: '#FFBF69'
                    },
                    boxShadow: {
                        'soft': '0 4px 15px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 15px rgba(184, 216, 184, 0.6)'
                    }
                },
                fontFamily: {
                    'nunito': ['Nunito', 'sans-serif']
                }
            }
        }
    </script>
    <style type="text/css">
        @font-face {
            font-family: 'Atlassian Sans';
            font-style: normal;
            font-weight: 400 653;
            font-display: swap;
            src:
                local('AtlassianSans'),
                local('Atlassian Sans Text'),
                url('chrome-extension://liecbddmkiiihnedobmlmillhodjkdmb/fonts/AtlassianSans-latin.woff2') format('woff2');
            unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304,
                U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
        }
    </style>
</head>

<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Ôn Tập Kiến Thức</h1>
            <p class="text-gray-600">Kiểm tra kiến thức của bạn với các câu hỏi này</p>
        </header>

        <!-- Main Content Container -->
        <div class="bg-white rounded-2xl shadow-soft overflow-hidden">
            <div class="flex flex-col md:flex-row">
                <!-- Sidebar - Hidden on mobile by default -->
                <div id="sidebar"
                    class="w-full md:w-72 lg:w-80 bg-pastelGreenLight p-4 md:border-r border-pastelGreen sidebar-mobile-hidden">
                    <div class="flex flex-col h-full">
                        <!-- Sidebar Header -->
                        <div class="text-center mb-6 p-2 bg-white rounded-lg shadow-soft">
                            <h2 class="text-xl font-bold text-gray-800">Tài Liệu Ôn Tập</h2>
                            <p class="text-sm text-gray-600">Chọn phần để ôn tập</p>
                        </div>

                        <!-- Summary Cards -->
                        <div class="flex-grow overflow-y-auto sidebar-scroll mb-6 space-y-4">
                            <div class="summary-card rounded-lg shadow-soft overflow-hidden" onclick="changeSection(0)">
                                <div class="card-icon-container bg-cardGreen">
                                    <div class="quiz-type-icon bg-white text-cardGreen">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                                clip-rule="evenodd"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="font-semibold text-gray-800">Giáo Lý Căn Bản</h3>
                                        <span
                                            class="text-xs font-medium px-2 py-1 bg-green-100 text-green-800 rounded-full">Trắc
                                            nghiệm</span>
                                    </div>
                                    <p class="card-summary">Ôn tập các kiến thức cơ bản về giáo lý Công Giáo qua các câu
                                        hỏi trắc nghiệm.</p>
                                </div>
                            </div>

                            <div class="summary-card rounded-lg shadow-soft overflow-hidden" onclick="changeSection(1)">
                                <div class="card-icon-container bg-cardYellow">
                                    <div class="quiz-type-icon bg-white text-cardYellow">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path
                                                d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z">
                                            </path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="font-semibold text-gray-800">Bí Tích</h3>
                                        <span
                                            class="text-xs font-medium px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full">Điền
                                            từ</span>
                                    </div>
                                    <p class="card-summary">Tìm hiểu về 7 Bí tích trong Giáo Hội Công Giáo qua các bài
                                        tập điền từ.</p>
                                </div>
                            </div>

                            <div class="summary-card rounded-lg shadow-soft overflow-hidden" onclick="changeSection(2)">
                                <div class="card-icon-container bg-cardBlue">
                                    <div class="quiz-type-icon bg-white text-cardBlue">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z"
                                                clip-rule="evenodd"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="font-semibold text-gray-800">Kinh Thánh</h3>
                                        <span
                                            class="text-xs font-medium px-2 py-1 bg-blue-100 text-blue-800 rounded-full">Điền
                                            câu</span>
                                    </div>
                                    <p class="card-summary">Ôn tập kiến thức Kinh Thánh qua các bài tập điền câu từ Cựu
                                        Ước và Tân Ước.</p>
                                </div>
                            </div>

                            <div class="summary-card rounded-lg shadow-soft overflow-hidden">
                                <div class="card-icon-container bg-cardPink">
                                    <div class="quiz-type-icon bg-white text-cardPink">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.616 1.738 5.42a1 1 0 01-.285 1.05A3.989 3.989 0 0115 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.715-5.349L11 6.477V16h2a1 1 0 110 2H7a1 1 0 110-2h2V6.477L6.237 7.582l1.715 5.349a1 1 0 01-.285 1.05A3.989 3.989 0 015 15a3.989 3.989 0 01-2.667-1.019 1 1 0 01-.285-1.05l1.738-5.42-1.233-.617a1 1 0 01.894-1.788l1.599.799L9 4.323V3a1 1 0 011-1z"
                                                clip-rule="evenodd"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="font-semibold text-gray-800">Lịch Sử Giáo Hội</h3>
                                        <span
                                            class="text-xs font-medium px-2 py-1 bg-pink-100 text-pink-800 rounded-full">Ghép
                                            đôi</span>
                                    </div>
                                    <p class="card-summary">Tìm hiểu về lịch sử Giáo Hội qua các bài tập ghép đôi sự
                                        kiện và thời gian.</p>
                                </div>
                            </div>

                            <div class="summary-card rounded-lg shadow-soft overflow-hidden">
                                <div class="card-icon-container bg-cardAmber">
                                    <div class="quiz-type-icon bg-white text-cardAmber">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"
                                                clip-rule="evenodd"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="font-semibold text-gray-800">Luân Lý</h3>
                                        <span
                                            class="text-xs font-medium px-2 py-1 bg-amber-100 text-amber-800 rounded-full">Câu
                                            hỏi mở</span>
                                    </div>
                                    <p class="card-summary">Ôn tập kiến thức về luân lý Công Giáo qua các câu hỏi mở và
                                        tình huống thực tế.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Countdown Timer -->
                        <div class="bg-white rounded-lg p-4 shadow-soft border border-pastelGreen">
                            <h3 class="text-center font-semibold text-gray-700 mb-3">Thời gian đến kỳ thi</h3>
                            <div class="flex justify-center" id="countdown">
                                <div class="countdown-box">
                                    <div class="countdown-number" id="days">26</div>
                                    <div class="countdown-label">Ngày</div>
                                </div>
                                <div class="countdown-box">
                                    <div class="countdown-number" id="hours">09</div>
                                    <div class="countdown-label">Giờ</div>
                                </div>
                                <div class="countdown-box">
                                    <div class="countdown-number" id="minutes">11</div>
                                    <div class="countdown-label">Phút</div>
                                </div>
                                <div class="countdown-box">
                                    <div class="countdown-number" id="seconds">08</div>
                                    <div class="countdown-label">Giây</div>
                                </div>
                            </div>
                            <p class="text-center text-xs text-gray-500 mt-2">Ngày thi: 25/05/2025</p>
                        </div>
                    </div>
                </div>

                <!-- Main Quiz Content -->
                <div class="flex-grow p-4 md:p-6">
                    <div class="max-w-3xl mx-auto">
                        <!-- Section Selector and Guide Button in same row -->
                        <div class="flex flex-wrap items-center mb-4 gap-2">
                            <div class="w-full md:w-3/4 flex items-center gap-3">
                                <div class="flex-grow">
                                    <label for="sectionSelector" class="block text-gray-600 mb-2 font-medium">Chọn phần
                                        ôn tập:</label>
                                    <select id="sectionSelector"
                                        class="w-full py-3 px-4 rounded-lg bg-white border border-pastelGreen focus:outline-none focus:border-pastelGreenDark appearance-none pr-10">
                                        <option value="0">Phần 1: Phụng Vụ</option>
                                        <option value="1">Phần 2: Bí Tích</option>
                                        <option value="2">Phần 3: Giáo Hội</option>
                                    </select>
                                </div>
                                <div class="mt-8">
                                    <button id="rulesButton"
                                        class="bg-softYellow hover:bg-yellow-200 text-gray-700 py-3 px-5 rounded-lg shadow-soft flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Hướng dẫn
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Search Bar and Random Button in same row -->
                        <div class="mb-6 flex flex-wrap items-center gap-3">
                            <div class="flex-grow">
                                <div class="relative">
                                    <input type="text" id="searchInput" placeholder="Tìm kiếm câu hỏi..."
                                        class="input-field w-full py-3 px-4 rounded-lg bg-white border border-pastelGreen focus:outline-none focus:border-pastelGreenDark">
                                    <button id="searchButton"
                                        class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-pastelGreen hover:bg-pastelGreenDark text-gray-700 py-2 px-4 rounded-full">
                                        Tìm
                                    </button>
                                </div>
                            </div>
                            <div>
                                <button id="randomButton"
                                    class="bg-lightBlue hover:bg-blue-200 text-gray-700 py-3 px-5 rounded-lg shadow-soft h-full flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                                        </path>
                                    </svg>
                                    Câu hỏi ngẫu nhiên
                                </button>
                            </div>
                        </div>

                        <!-- Progress Bar -->
                        <div class="mb-4 bg-pastelGreenLight rounded-full h-3 shadow-soft overflow-hidden">
                            <div id="progressBar"
                                class="progress-bar h-full bg-gradient-to-r from-pastelGreen to-pastelGreenDark"
                                style="width: 20%;"></div>
                        </div>

                        <!-- Question Counter -->
                        <div class="mb-4">
                            <span id="questionCounter" class="text-gray-600">Câu hỏi 1 / 5</span>
                        </div>

                        <!-- Error Message Area -->
                        <div id="errorMessageArea" class="hidden mb-4 slide-in">
                            <div class="error-message">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"
                                        clip-rule="evenodd"></path>
                                </svg>
                                <span id="errorMessage"></span>
                            </div>
                        </div>

                        <!-- Quiz Card -->
                        <div id="quizCard" class="quiz-card bg-white rounded-2xl p-6 md:p-8 shadow-soft mb-6">
                            <div id="loadingState" class="text-center py-10 hidden">
                                <div
                                    class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-pastelGreen">
                                </div>
                                <p class="mt-4 text-gray-600">Đang tải câu hỏi...</p>
                            </div>

                            <div id="questionContent" class="">
                                <h2 id="questionText" class="text-xl md:text-2xl font-semibold mb-6 leading-relaxed">1.
                                    H. Phụng vụ là gì?</h2>

                                <div class="mb-6">
                                    <label for="answerInput" class="block text-gray-600 mb-2">Câu trả lời của
                                        bạn:</label>
                                    <textarea id="answerInput" rows="4"
                                        class="input-field w-full p-3 border border-gray-200 rounded-lg focus:outline-none"
                                        placeholder="Nhập câu trả lời của bạn tại đây..."></textarea>
                                </div>

                                <div id="feedbackArea" class="mb-6 hidden">
                                    <div id="correctFeedback"
                                        class="hidden bg-pastelGreen bg-opacity-50 border border-pastelGreenDark rounded-lg p-4 mb-4">
                                        <p class="text-green-800 font-medium">✓ Chính xác! Làm tốt lắm.</p>
                                        <p id="correctAnswerText" class="mt-2 text-gray-700"></p>
                                    </div>

                                    <div id="incorrectFeedback"
                                        class="hidden bg-softPink bg-opacity-30 border border-softPink rounded-lg p-4 mb-4">
                                        <p class="text-red-700 font-medium">✗ Chưa chính xác. Hãy thử lại!</p>
                                        <p id="tipText" class="mt-2 text-gray-700"></p>
                                    </div>
                                </div>

                                <div class="flex flex-wrap gap-3">
                                    <button id="checkButton"
                                        class="bg-pastelGreen hover:bg-pastelGreenDark text-gray-700 py-3 px-6 rounded-lg font-medium shadow-soft flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        Kiểm tra
                                    </button>

                                    <button id="showAnswerButton"
                                        class="hidden bg-softYellow hover:bg-yellow-200 text-gray-700 py-3 px-6 rounded-lg font-medium shadow-soft flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Xem đáp án
                                    </button>

                                    <div class="flex-grow"></div>

                                    <button id="prevButton"
                                        class="bg-warmBeige hover:bg-amber-200 text-gray-700 py-3 px-6 rounded-lg font-medium shadow-soft flex items-center opacity-50 cursor-not-allowed"
                                        disabled="">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                        Trước
                                    </button>

                                    <button id="nextButton"
                                        class="bg-pastelGreenDark hover:bg-green-300 text-gray-700 py-3 px-6 rounded-lg font-medium shadow-soft flex items-center">
                                        Tiếp theo
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <div id="searchResults" class="hidden">
                                <h3 class="text-xl font-semibold mb-4">Kết quả tìm kiếm</h3>
                                <div id="resultsContainer" class="space-y-3 max-h-96 overflow-y-auto pr-2"></div>
                                <button id="backToQuizButton"
                                    class="mt-6 bg-pastelGreen hover:bg-pastelGreenDark text-gray-700 py-2 px-4 rounded-lg font-medium shadow-soft flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M11 17l-5-5m0 0l5-5m-5 5h12"></path>
                                    </svg>
                                    Quay lại ôn tập
                                </button>
                            </div>
                        </div>

                        <!-- Instructions -->
                        <div class="bg-pastelGreenLight bg-opacity-70 rounded-xl p-5 shadow-soft">
                            <h3 class="text-lg font-semibold mb-2 text-gray-700">Cách sử dụng:</h3>
                            <ul class="list-disc pl-5 text-gray-600 space-y-1">
                                <li>Đọc kỹ câu hỏi</li>
                                <li>Nhập câu trả lời đầy đủ vào ô văn bản</li>
                                <li>Nhấn "Kiểm tra" để xem câu trả lời của bạn có đúng không</li>
                                <li>Nếu sai, bạn sẽ nhận được gợi ý để giúp bạn</li>
                                <li>Sau khi kiểm tra, bạn có thể nhấn "Xem đáp án" để xem câu trả lời đúng</li>
                                <li>Di chuyển bằng các nút Trước và Tiếp theo</li>
                                <li>Sử dụng thanh tìm kiếm để tìm câu hỏi cụ thể</li>
                                <li>Nhấn "Câu hỏi ngẫu nhiên" để chuyển đến một câu hỏi ngẫu nhiên</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toggle Sidebar Button (Mobile Only) -->
    <button id="toggleSidebar"
        class="toggle-sidebar bg-pastelGreen hover:bg-pastelGreenDark text-gray-700 p-3 rounded-full shadow-soft">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <!-- Rules Modal -->
    <div id="rulesModal"
        class="modal fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="modal-content bg-white rounded-2xl p-6 md:p-8 max-w-lg w-full mx-4 transform scale-95">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Hướng dẫn &amp; Quy tắc</h3>
                <button id="closeRulesButton" class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>

            <div class="space-y-4 text-gray-700">
                <div class="bg-pastelGreenLight p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Cách trả lời câu hỏi</h4>
                    <p>Nhập câu trả lời đầy đủ vào ô văn bản. Câu trả lời của bạn nên là một câu hoàn chỉnh khớp với đáp
                        án mong đợi.</p>
                </div>

                <div>
                    <h4 class="font-semibold mb-2">Quy tắc kiểm tra đáp án:</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>Câu trả lời của bạn được chuẩn hóa trước khi kiểm tra (chữ thường, không dấu câu)</li>
                        <li>Khoảng trắng được chuẩn hóa (nhiều khoảng trắng thành một khoảng trắng)</li>
                        <li>Bạn có 2 lần thử cho mỗi câu hỏi trước khi đáp án được hiển thị</li>
                        <li>Nếu câu trả lời chuẩn hóa của bạn khớp 100% với đáp án đúng, nó được coi là chính xác</li>
                    </ul>
                </div>

                <div class="bg-pastelGreenLight p-4 rounded-lg">
                    <h4 class="font-semibold mb-2">Điều hướng &amp; Tính năng</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>Sử dụng nút Trước/Tiếp theo để di chuyển giữa các câu hỏi</li>
                        <li>Nhấn "Câu hỏi ngẫu nhiên" để chuyển đến một câu hỏi ngẫu nhiên</li>
                        <li>Sử dụng thanh tìm kiếm để tìm câu hỏi theo từ khóa</li>
                        <li>Sau khi kiểm tra câu trả lời, bạn có thể nhấn "Xem đáp án" để xem câu trả lời đúng</li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-semibold mb-2">Mẹo</h4>
                    <p>Nếu câu trả lời của bạn không chính xác, bạn sẽ nhận được gợi ý để hướng dẫn bạn đến câu trả lời
                        đúng.</p>
                </div>
            </div>

            <button id="closeRulesButtonBottom"
                class="mt-6 w-full bg-pastelGreen hover:bg-pastelGreenDark text-gray-700 py-3 px-6 rounded-lg font-medium shadow-soft">
                Đã hiểu!
            </button>
        </div>
    </div>

    <script>
        // Question sets for different sections
        const questionSets = [
            // Section 1: Phụng Vụ
            [
                {
                    question: "1. H. Phụng vụ là gì?",
                    tips: "Thưa. Phụng vụ ______ ______ nhiệm ______.",
                    correctAnswers: "Thưa. Phụng vụ là việc Hội Thánh chính thức cử hành mầu nhiệm Đức Kitô, để thờ phượng Thiên Chúa và thánh hóa con người."
                },
                {
                    question: "2. H. Phụng vụ có vị trí nào trong đời sống Hội Thánh?",
                    tips: "Phụng vụ là ______ và là ______ của đời sống Hội Thánh.",
                    correctAnswers: "Phụng vụ là nguồn mạch và là chóp đỉnh của đời sống Hội Thánh."
                },
                {
                    question: "3. H. Phụng vụ diễn tả điều gì?",
                    tips: "Phụng vụ diễn tả ______ của Hội Thánh và ______ của các tín hữu.",
                    correctAnswers: "Phụng vụ diễn tả đức tin của Hội Thánh và nuôi dưỡng đức tin của các tín hữu."
                },
                {
                    question: "4. H. Phụng vụ có những yếu tố nào?",
                    tips: "Phụng vụ có những yếu tố ______ và những yếu tố ______.",
                    correctAnswers: "Phụng vụ có những yếu tố bất biến và những yếu tố khả biến."
                },
                {
                    question: "5. H. Ai có quyền điều chỉnh Phụng vụ?",
                    tips: "Chỉ có ______ hoặc ______ mới có quyền điều chỉnh Phụng vụ.",
                    correctAnswers: "Chỉ có Tòa Thánh hoặc Giám mục đoàn mới có quyền điều chỉnh Phụng vụ."
                }
            ],
            // Section 2: Bí Tích
            [
                {
                    question: "1. H. Bí tích là gì?",
                    tips: "Bí tích là ______ hữu hình do ______ thiết lập để ______.",
                    correctAnswers: "Bí tích là dấu chỉ hữu hình do Đức Kitô thiết lập để thông ban ơn cứu độ."
                },
                {
                    question: "2. H. Có mấy Bí tích và là những Bí tích nào?",
                    tips: "Có ______ Bí tích là: ______.",
                    correctAnswers: "Có bảy Bí tích là: Rửa tội, Thêm sức, Thánh Thể, Hòa giải, Xức dầu bệnh nhân, Truyền chức thánh và Hôn phối."
                },
                {
                    question: "3. H. Bí tích Thánh Thể là gì?",
                    tips: "Bí tích Thánh Thể là ______ và ______ Đức Giêsu Kitô.",
                    correctAnswers: "Bí tích Thánh Thể là Mình và Máu Đức Giêsu Kitô, cùng với Linh hồn và Thiên tính của Người, nghĩa là toàn thể Đức Kitô, thực sự có trong hình bánh và hình rượu đã được truyền phép."
                },
                {
                    question: "4. H. Bí tích Hòa giải có những hiệu quả nào?",
                    tips: "Bí tích Hòa giải ______ tội lỗi, ______ với Thiên Chúa và ______.",
                    correctAnswers: "Bí tích Hòa giải tha thứ tội lỗi, hòa giải với Thiên Chúa và Hội Thánh, đồng thời ban lại ân sủng đã mất vì tội trọng."
                },
                {
                    question: "5. H. Ai có thể lãnh nhận Bí tích Truyền chức thánh?",
                    tips: "Chỉ có ______ đã chịu phép ______ mới có thể lãnh nhận Bí tích Truyền chức thánh.",
                    correctAnswers: "Chỉ có nam giới đã chịu phép Rửa tội mới có thể lãnh nhận Bí tích Truyền chức thánh."
                }
            ],
            // Section 3: Giáo Hội
            [
                {
                    question: "1. H. Giáo Hội là gì?",
                    tips: "Giáo Hội là ______ Dân Thiên Chúa, ______ Đức Kitô và ______ Chúa Thánh Thần.",
                    correctAnswers: "Giáo Hội là cộng đoàn Dân Thiên Chúa, Thân Thể Đức Kitô và Đền Thờ Chúa Thánh Thần."
                },
                {
                    question: "2. H. Giáo Hội có những đặc tính nào?",
                    tips: "Giáo Hội có bốn đặc tính là: ______, ______, ______ và ______.",
                    correctAnswers: "Giáo Hội có bốn đặc tính là: duy nhất, thánh thiện, công giáo và tông truyền."
                },
                {
                    question: "3. H. Ai là người đứng đầu Giáo Hội?",
                    tips: "______ là Đấng đứng đầu Giáo Hội, và ______ là đại diện của Người trên trần gian.",
                    correctAnswers: "Đức Giêsu Kitô là Đấng đứng đầu Giáo Hội, và Đức Giáo Hoàng là đại diện của Người trên trần gian."
                },
                {
                    question: "4. H. Sứ mạng của Giáo Hội là gì?",
                    tips: "Sứ mạng của Giáo Hội là ______, ______ và ______.",
                    correctAnswers: "Sứ mạng của Giáo Hội là loan báo Tin Mừng, cử hành các Bí tích và phục vụ trong đức ái."
                },
                {
                    question: "5. H. Giáo dân có vai trò gì trong Giáo Hội?",
                    tips: "Giáo dân được mời gọi ______ trong đời sống ______ và ______.",
                    correctAnswers: "Giáo dân được mời gọi thánh hóa thế giới trong đời sống gia đình và xã hội, làm chứng cho Đức Kitô bằng đời sống và lời nói."
                }
            ]
        ];

        // Main application state
        let currentSection = 0;
        let questions = questionSets[currentSection];
        let currentQuestionIndex = 0;
        let attemptCount = 0;
        const maxAttempts = 2;
        let sidebarVisible = false;

        // DOM Elements
        const loadingState = document.getElementById('loadingState');
        const questionContent = document.getElementById('questionContent');
        const questionText = document.getElementById('questionText');
        const answerInput = document.getElementById('answerInput');
        const checkButton = document.getElementById('checkButton');
        const showAnswerButton = document.getElementById('showAnswerButton');
        const nextButton = document.getElementById('nextButton');
        const prevButton = document.getElementById('prevButton');
        const feedbackArea = document.getElementById('feedbackArea');
        const correctFeedback = document.getElementById('correctFeedback');
        const incorrectFeedback = document.getElementById('incorrectFeedback');
        const tipText = document.getElementById('tipText');
        const correctAnswerText = document.getElementById('correctAnswerText');
        const questionCounter = document.getElementById('questionCounter');
        const progressBar = document.getElementById('progressBar');
        const randomButton = document.getElementById('randomButton');
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const searchResults = document.getElementById('searchResults');
        const resultsContainer = document.getElementById('resultsContainer');
        const backToQuizButton = document.getElementById('backToQuizButton');
        const quizCard = document.getElementById('quizCard');
        const rulesButton = document.getElementById('rulesButton');
        const rulesModal = document.getElementById('rulesModal');
        const closeRulesButton = document.getElementById('closeRulesButton');
        const closeRulesButtonBottom = document.getElementById('closeRulesButtonBottom');
        const sectionSelector = document.getElementById('sectionSelector');
        const errorMessageArea = document.getElementById('errorMessageArea');
        const errorMessage = document.getElementById('errorMessage');
        const sidebar = document.getElementById('sidebar');
        const toggleSidebar = document.getElementById('toggleSidebar');

        // Initialize the quiz
        function initQuiz() {
            // Update UI
            loadingState.classList.add('hidden');
            questionContent.classList.remove('hidden');
            updateProgressBar();
            displayQuestion(0);

            // Start countdown
            startCountdown();
        }

        // Display a question by index
        function displayQuestion(index) {
            if (index < 0 || index >= questions.length) return;

            currentQuestionIndex = index;
            const question = questions[index];

            // Reset state
            answerInput.value = '';
            feedbackArea.classList.add('hidden');
            correctFeedback.classList.add('hidden');
            incorrectFeedback.classList.add('hidden');
            showAnswerButton.classList.add('hidden'); // Hide show answer button on new question
            hideErrorMessage(); // Hide any error messages
            attemptCount = 0;

            // Update UI
            questionText.textContent = question.question;
            questionCounter.textContent = `Câu hỏi ${index + 1} / ${questions.length}`;
            updateProgressBar();

            // Update navigation button states
            prevButton.disabled = index === 0;
            prevButton.classList.toggle('opacity-50', index === 0);
            prevButton.classList.toggle('cursor-not-allowed', index === 0);

            // Add fade-in animation
            questionText.classList.add('fade-in');
            setTimeout(() => questionText.classList.remove('fade-in'), 500);
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Normalize text for comparison
        function normalizeText(text) {
            return text
                .toLowerCase()
                .replace(/[.,;:'"?!/()[\]{}]/g, '')
                .replace(/\s+/g, ' ')
                .trim();
        }

        // Show error message
        function showErrorMessage(message) {
            errorMessage.textContent = message;
            errorMessageArea.classList.remove('hidden');
        }

        // Hide error message
        function hideErrorMessage() {
            errorMessageArea.classList.add('hidden');
        }

        // Check if the answer is correct
        function checkAnswer() {
            const userAnswer = answerInput.value;
            const currentQuestion = questions[currentQuestionIndex];

            if (!userAnswer.trim()) {
                showErrorMessage('Vui lòng nhập câu trả lời trước khi kiểm tra.');
                return;
            }

            // Hide error message if it was shown
            hideErrorMessage();

            attemptCount++;

            const normalizedUserAnswer = normalizeText(userAnswer);
            const normalizedCorrectAnswer = normalizeText(currentQuestion.correctAnswers);

            feedbackArea.classList.remove('hidden');

            // Show the "Show Answer" button after checking
            showAnswerButton.classList.remove('hidden');
            showAnswerButton.classList.add('button-appear');

            if (normalizedUserAnswer === normalizedCorrectAnswer) {
                // Correct answer
                correctFeedback.classList.remove('hidden');
                incorrectFeedback.classList.add('hidden');
                correctAnswerText.textContent = currentQuestion.correctAnswers;
            } else {
                // Incorrect answer
                incorrectFeedback.classList.remove('hidden');
                correctFeedback.classList.add('hidden');
                tipText.textContent = currentQuestion.tips;

                if (attemptCount >= maxAttempts) {
                    tipText.innerHTML = `${currentQuestion.tips}<br><br><strong>Đáp án đúng:</strong> ${currentQuestion.correctAnswers}`;
                }
            }
        }

        // Show the correct answer
        function showAnswer() {
            const currentQuestion = questions[currentQuestionIndex];
            feedbackArea.classList.remove('hidden');
            correctFeedback.classList.remove('hidden');
            incorrectFeedback.classList.add('hidden');
            correctAnswerText.textContent = currentQuestion.correctAnswers;
        }

        // Go to next question
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                displayQuestion(currentQuestionIndex + 1);
            } else {
                // Reached the end, loop back to first question
                displayQuestion(0);
            }
        }

        // Go to previous question
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                displayQuestion(currentQuestionIndex - 1);
            }
        }

        // Go to a random question
        function goToRandomQuestion() {
            const randomIndex = Math.floor(Math.random() * questions.length);
            displayQuestion(randomIndex);
        }

        // Search questions
        function searchQuestions() {
            const searchTerm = normalizeText(searchInput.value);

            if (!searchTerm) {
                showErrorMessage('Vui lòng nhập từ khóa tìm kiếm.');
                return;
            }

            // Hide error message if it was shown
            hideErrorMessage();

            const results = questions.filter(q =>
                normalizeText(q.question).includes(searchTerm) ||
                normalizeText(q.correctAnswers).includes(searchTerm)
            );

            // Show search results
            questionContent.classList.add('hidden');
            searchResults.classList.remove('hidden');

            // Clear previous results
            resultsContainer.innerHTML = '';

            if (results.length === 0) {
                resultsContainer.innerHTML = '<p class="text-gray-600">Không tìm thấy kết quả.</p>';
            } else {
                results.forEach((result, index) => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'p-4 bg-pastelGreenLight rounded-lg cursor-pointer hover:bg-pastelGreen transition-colors';
                    resultItem.innerHTML = `<p class="font-medium">${result.question}</p>`;
                    resultItem.addEventListener('click', () => {
                        const questionIndex = questions.findIndex(q => q.question === result.question);
                        if (questionIndex !== -1) {
                            searchResults.classList.add('hidden');
                            questionContent.classList.remove('hidden');
                            displayQuestion(questionIndex);
                        }
                    });
                    resultsContainer.appendChild(resultItem);
                });
            }
        }

        // Return to quiz from search results
        function backToQuiz() {
            searchResults.classList.add('hidden');
            questionContent.classList.remove('hidden');
        }

        // Show rules modal
        function showRulesModal() {
            rulesModal.classList.remove('hidden');
            rulesModal.classList.add('fade-in');
            document.body.style.overflow = 'hidden'; // Prevent scrolling
        }

        // Hide rules modal
        function hideRulesModal() {
            rulesModal.classList.add('hidden');
            document.body.style.overflow = ''; // Restore scrolling
        }

        // Change question section
        function changeSection(sectionIndex) {
            currentSection = sectionIndex;
            questions = questionSets[sectionIndex];
            currentQuestionIndex = 0;
            sectionSelector.value = sectionIndex;
            displayQuestion(0);
        }

        // Toggle sidebar visibility on mobile
        function toggleSidebarVisibility() {
            sidebarVisible = !sidebarVisible;
            if (sidebarVisible) {
                sidebar.classList.remove('sidebar-mobile-hidden');
            } else {
                sidebar.classList.add('sidebar-mobile-hidden');
            }
        }

        // Start countdown timer
        function startCountdown() {
            const examDate = new Date('May 25, 2025 00:00:00').getTime();

            function updateCountdown() {
                const now = new Date().getTime();
                const distance = examDate - now;

                // Time calculations
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // Display the result
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');

                // If the countdown is finished, display a message
                if (distance < 0) {
                    clearInterval(x);
                    document.getElementById('countdown').innerHTML = "<p class='text-red-600 font-bold'>KỲ THI ĐÃ BẮT ĐẦU!</p>";
                }
            }

            // Update the countdown every 1 second
            updateCountdown();
            const x = setInterval(updateCountdown, 1000);
        }

        // Event Listeners
        checkButton.addEventListener('click', checkAnswer);
        showAnswerButton.addEventListener('click', showAnswer);
        nextButton.addEventListener('click', nextQuestion);
        prevButton.addEventListener('click', prevQuestion);
        randomButton.addEventListener('click', goToRandomQuestion);
        searchButton.addEventListener('click', searchQuestions);
        backToQuizButton.addEventListener('click', backToQuiz);
        rulesButton.addEventListener('click', showRulesModal);
        closeRulesButton.addEventListener('click', hideRulesModal);
        closeRulesButtonBottom.addEventListener('click', hideRulesModal);
        toggleSidebar.addEventListener('click', toggleSidebarVisibility);

        // Section selector listener
        sectionSelector.addEventListener('change', function () {
            changeSection(parseInt(this.value));
        });

        // Close modals when clicking outside
        rulesModal.addEventListener('click', (e) => {
            if (e.target === rulesModal) {
                hideRulesModal();
            }
        });

        // Allow pressing Enter in search input
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchQuestions();
            }
        });

        // Allow pressing Enter in answer input
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                checkAnswer();
            }
        });

        // Start the quiz
        initQuiz();
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'9374f50af2b384e5',t:'MTc0NTgyNjUwNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
    <iframe height="1" width="1"
        style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>
    <div id="loom-companion-mv3" ext-id="liecbddmkiiihnedobmlmillhodjkdmb">
        <div id="shadow-host-companion"></div>
    </div>
</body><ddict-div style="visibility: visible !important;"></ddict-div><youtube-dubbing-text-voice
    data-wxt-shadow-root=""
    style="display: none; position: fixed; right: 0px; top: calc(60% - 50px); transform: translateY(-50%); z-index: 9999;"></youtube-dubbing-text-voice>

</html>